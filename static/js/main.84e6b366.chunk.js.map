{"version":3,"sources":["ui/TitleBar.tsx","util/LruCache.ts","util/modulo.ts","util/shuffleList.ts","api/ContentData.ts","api/SlideManager.ts","util/isMobile.ts","ui/MenuCollapser.tsx","ui/ControlBar.tsx","ui/hooks/useWindowSize.ts","ui/hooks/WindowSizeWrapper.tsx","ui/SliderSlide.tsx","ui/Slider.tsx","api/ContentZoomPan.tsx","ui/ContentRenderer.tsx","ui/AppStyle.js","ui/App.tsx","serviceWorker.js","index.js","api/Settings.ts","api/TransitionStyle.ts","api/DisplayStyle.ts","util/Size.ts","api/ContentType.ts","util/buildArray.ts","util/isElectron.ts","api/FileContentSource.ts","ui/SlideShowMain.tsx","util/listFileEntries.ts","util/promiseAny.ts","util/arrayUnique.ts","api/SlideshowState.ts","api/SlideshowTimer.ts","api/UrlContentSource.ts","ui/DragAndDrop.tsx"],"names":["withStyles","palette","spacing","createStyles","titlebar","display","alignItems","userSelect","backgroundColor","controlPanel","main","justifyContent","position","dragRegion","top","left","width","height","zIndex","appRegion","section","logo","padding","button","borderRadius","closeButton","error","classes","className","slideTitle","classnames","src","process","alt","variant","onClick","global","electronIpc","send","LruCache","max","onEviction","cache","this","Map","key","item","get","delete","set","val","has","size","evictOldest","evictKey","first","evictValue","keys","next","value","modulo","a","n","shuffleList","array","i","length","j","Math","floor","random","createImage","url","Promise","res","rej","image","Image","onload","onerror","undefined","createVideo","video","document","createElement","onloadeddata","ContentData","contentSource","objectUrl","type","duration","Size","state","onLoaded","handleLoaded","forEach","callOnLoad","onLoad","getUrl","getObjectUrl","URL","revokeObjectURL","push","doLoad","index","indexOf","splice","cleanup","ContentType","naturalWidth","naturalHeight","Video","videoWidth","videoHeight","SlideManager","sources","startAtSid","cacheSize","startAtIndex","playlist","indexOffset","buildArray","findIndex","s","id","cd","externalIndex","intplIndex","externalToPlaylistIndex","source","data","clear","rating","pow","currentFileIndex","ratings","map","f","maxRating","reduce","p","c","numSeqs","ratePow","instances","Array","fill","count","numWanted","min","target","cur","allSections","unshift","sourceIndex","newPlaylist","plIndex","isMobile","test","navigator","userAgent","MenuCollapser","buttonContent","buttonProps","collapse","children","menuProps","React","useState","anchor","setAnchor","IconButton","e","currentTarget","anchorEl","keepMounted","open","onClose","Children","child","Fragment","SIZE_THRESHOLDS","displayStyleIcons","DisplayStyle","Standard","CropOriginalIcon","Stretch","HeightIcon","ZoomPan","ControlCameraIcon","displayStyleSequence","transitionStyleIcons","TransitionStyle","Fade","BlurOnIcon","Slide","SwapHorizIcon","Instant","FlashOnIcon","transitionStyleSequence","root","flex","sideContainer","subContainer","centreNavControls","flexBasis","speedContainer","speedSlider","menuPaper","screenWidth","onNext","onPlay","onPause","onBack","onEnterFullscreen","onExitFullscreen","onShuffleChange","onDisplayStyleChange","onSpeedChange","onTransitionStyleChange","onVolumeChange","onFilesAdded","onUrlsAdded","linkInputOpen","setLinkInputOpen","linkUrls","setLinkUrls","tmpInput","dirPropName","find","DisplayStyleIcon","displayStyle","TransitionStyleIcon","transitionStyle","Badge","badgeContent","anchorOrigin","vertical","horizontal","paper","transformOrigin","component","hidden","multiple","onChange","ev","from","files","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","fullWidth","label","margin","split","placeholder","multiline","join","DialogActions","Button","color","isShuffled","title","isPlaying","Slider","speed","v","Number","step","volume","isFullscreen","useWindowSize","setSize","useLayoutEffect","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","WindowSizeWrapper","SliderSlide","slideState","slideContentRenderer","slide","setSlide","useEffect","overflow","slider","slideFadeTransition","transition","slideSlideTransition","slideInstantTransition","slideIndex","preloadCount","panSensitivity","flickSensitivity","swipePanX","setSwipePanX","rootRef","useRef","ref","onPan","current","panPerc","deltaX","clientWidth","isFinal","velocityX","slideNum","offset","translate","opacity","abs","sign","style","transform","isActive","PlanPoint","x","y","z","d","ContentZoomPan","contentSize","screenSize","onTransform","timer","plan","transitionMs","scaleMult","nextPoint","clearTimeout","currPoint","fullDuration","pointToTransform","setTimeout","reverse","start","cRat","ratio","sRat","xOffset","yOffset","totalPause","pp","content","objectFit","pointerEvents","contentStretch","contentZoomPan","onSourceInvalid","dataUrl","setDataUrl","setError","setTransform","err","console","warn","name","load","cancelLoad","getSize","contentType","getType","displaySize","clientHeight","zoomer","stop","imgVidClassName","autoPlay","loop","muted","preload","vid","paused","play","pause","useStyles","makeStyles","theme","body","AppStyle","CssBaseline","App","themeType","createMuiTheme","primary","teal","background","default","controlPanelOverlay","createTheme","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch","message","SettingType","SettingSection","settingsKey","reverseSections","Object","entries","k","Settings","controlBar","reversePrefs","getKeys","pref","prefKey","Error","JSON","stringify","sectKey","fullKey","getSetting","isElectron","getSettings","parse","localStorage","getItem","setSetting","settings","setSettings","setItem","_","FileContentSource","file","createObjectURL","getFileEntryContentSource","fileEntry","getFileContentSource","SlideshowMain","props","showControlsTimeout","slideshowTimer","enterFullscreen","requestFullscreen","showControls","exitFullscreen","fullscreenElement","handlePause","updateSsState","handlePlay","handleShuffleChange","shuffle","ssController","getDataForIndex","PreloadCount","unshuffle","setSlideIndex","handleSpeedChange","setSpeed","handlePlainSssChange","constrolsHideable","handleShowControlsTimeout","setState","handleFullscreenChange","handleDrop","items","fileItems","filter","kind","listFileEntries","webkitGetAsEntry","promiseAny","values","reasons","r","addNewSources","handleFilesAdded","handleUrlsAdded","urls","getUrlContentSource","handleKeyUp","ssState","handled","handlePrevious","handleNext","isBorderless","preventDefault","stopPropagation","renderSlideContent","slideDuration","removeSource","SlideshowTimer","createRef","newSsState","saveSlideshowStateToSettings","newSources","arrayUnique","newSsc","getData","setIndex","slideshow","hideMouse","onMouseMove","onMouseDown","titlebarHideable","titlebarHideableShow","mainArea","onDoubleClick","dragDrop","onDrop","controls","controlsHideable","controlsHideableShow","Component","transitionProperty","transitionDuration","bottom","flexFlow","flexGrow","flexShrink","cursor","fileEntries","all","isFile","isDirectory","createReader","readEntries","flat","promises","allSettled","results","status","reason","arr","keyFunc","result","SpeedDelay","timeout","startedAt","handleDataLoaded","updateTimer","Date","isLoaded","stdDuration","vidDuration","getDuration","delay","calculateRemainingDuration","UrlContentSource","DragAndDrop","dropRef","dragCounter","dragging","handleDrag","handleDragIn","dataTransfer","handleDragOut","div","overlay","overlayMessage","border","right","textAlign","fontSize"],"mappings":"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","file":"static/js/main.84e6b366.chunk.js","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\n\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MaximizeIcon from '@material-ui/icons/Maximize';\nimport MinimizeIcon from '@material-ui/icons/Minimize';\n\n\nconst styles = ({ palette, spacing }: Theme) => createStyles({\n  titlebar: {\n    display: 'flex',\n    alignItems: 'center',\n    userSelect: 'none',\n    backgroundColor: palette.controlPanel.main,\n    justifyContent: 'space-between',\n    position: 'relative',\n  },\n  dragRegion: {\n    top: 6,\n    left: 6,\n    display: 'block',\n    position: 'absolute',\n    width: 'calc(100% - 12px)',\n    height: 'calc(100% - 6px)',\n    zIndex: -1,\n    appRegion: 'drag',\n  },\n  section: {\n    display: 'flex',\n    height: '100%',\n  },\n  logo: {\n    height: '100%',\n    padding: spacing(0.5),\n  },\n  button: {\n    borderRadius: 0,\n    appRegion: 'no-drag',\n  },\n  closeButton: {\n    '&:hover': {\n      backgroundColor: palette.error.main,\n    },\n  },\n});\n\ninterface Props extends WithStyles<typeof styles> {\n  className?: string;\n  slideTitle?: string;\n}\nconst TitleBar: React.FC<Props> = ({\n  classes,\n  className,\n  slideTitle,\n}) => (\n  <div className={classnames(className, classes.titlebar)}>\n    <div className={classes.dragRegion}></div>\n    <div className={classes.section}>\n      <img className={classes.logo} src={`${process.env.PUBLIC_URL}/logo192.png`} alt=\"\" />\n      <Typography display=\"inline\" variant=\"subtitle1\">Slideshow</Typography>\n    </div>\n    <div className={classes.section}>\n      <Typography display=\"inline\" variant=\"subtitle1\">{slideTitle}</Typography>\n    </div>\n    <div className={classes.section}>\n      <IconButton className={classes.button} onClick={() => global.electronIpc?.send('minimize')}><MinimizeIcon /></IconButton>\n      <IconButton className={classes.button} onClick={() => global.electronIpc?.send('maximize')}><MaximizeIcon /></IconButton>\n      <IconButton className={classnames(classes.button, classes.closeButton)} onClick={() => global.electronIpc?.send('close')}><CloseIcon /></IconButton>\n    </div>\n  </div>\n);\n\nexport default withStyles(styles)(TitleBar);\n","\ntype OnEviction<K, V> = (key: K, val: V) => void;\ninterface Options<K, V> {\n  max?: number;\n  onEviction?: OnEviction<K, V>;\n}\nclass LruCache<K, V> {\n  readonly max: number;\n  readonly cache: Map<K, V>;\n  readonly onEviction: OnEviction<K, V>;\n\n  constructor({ max = 10, onEviction = () => {} }: Options<K, V> = {}) {\n      this.max = max;\n      this.cache = new Map();\n      this.onEviction = onEviction;\n  }\n\n  get(key: K) {\n    let item = this.cache.get(key);\n    if (item) {\n      // refresh key\n      this.cache.delete(key);\n      this.cache.set(key, item);\n    }\n    return item;\n  }\n\n  set(key: K, val: V) {\n    if (this.cache.has(key)) {\n      // refresh key\n      this.cache.delete(key);\n    } else if (this.cache.size === this.max) {\n      this.evictOldest();\n    }\n    this.cache.set(key, val);\n  }\n\n  clear() {\n    while (this.cache.size > 0) {\n      this.evictOldest();\n    }\n  }\n\n  private evictOldest() {\n    const evictKey = this.first();\n    const evictValue = this.cache.get(evictKey) as V;\n    this.cache.delete(this.first());\n    this.onEviction(evictKey, evictValue);\n  }\n\n  private first() {\n    return this.cache.keys().next().value;\n  }\n}\n\nexport default LruCache;\n","const modulo = (a: number, n: number): number => ((a % n) + n) % n;\n\nexport default modulo;\n","const shuffleList = (array: any[]) => {\n  for (let i = array.length - 1; i > 0; i -= 1) {\n    const j = Math.floor(Math.random() * (i + 1));\n    // eslint-disable-next-line no-param-reassign\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n};\n\nexport default shuffleList;\n","import Size from '../util/Size';\nimport ContentSource from './ContentSource';\nimport ContentType from './ContentType';\n\nconst createImage = async (url: string) => new Promise<HTMLImageElement | undefined>((res, rej) => {\n  const image = new Image();\n  image.onload = () => res(image);\n  image.onerror = () => res(undefined);\n  image.src = url;\n});\n\nconst createVideo = async (url: string) => new Promise<HTMLVideoElement | undefined>((res, rej) => {\n  var video = document.createElement(\"video\");\n  video.onloadeddata = () => res(video);\n  video.onerror = () => res(undefined);\n  video.src = url;\n});\n\ntype OnContentDataLoaded = (err: string | undefined, url: string | undefined) => void;\n\nclass ContentData {\n  readonly contentSource: ContentSource;\n  private objectUrl: string | undefined;\n  private type: ContentType | undefined;\n  private duration: number = 0;\n  private size: Size = new Size(0, 0);\n  private state: 'new' | 'loading' | 'loaded' = 'new';\n  private onLoaded: OnContentDataLoaded[] = [];\n  \n\n  constructor(contentSource: ContentSource) {\n    this.contentSource = contentSource;\n  }\n\n  getType() {\n    return this.type;\n  }\n  \n  private getUrl() {\n    if (!this.objectUrl) {\n      this.objectUrl = this.contentSource.getObjectUrl();\n    }\n    return this.objectUrl;\n  }\n\n  cleanup() {\n    if (this.objectUrl) {\n      URL.revokeObjectURL(this.objectUrl);\n    }\n    this.objectUrl = undefined;\n  }\n\n  getDuration() {\n    return this.duration;\n  }\n\n  getSize() {\n    return this.size;\n  }\n\n  isLoaded() {\n    return this.state === 'loaded';\n  }\n\n  load(onLoad: OnContentDataLoaded) {\n    if (this.state === 'loaded') {\n      this.callOnLoad(onLoad);\n    } else {\n      this.onLoaded.push(onLoad);\n      if (this.state === 'new') {\n        this.doLoad();\n      }\n    }\n  }\n\n  cancelLoad(onLoad: OnContentDataLoaded) {\n    const index = this.onLoaded.indexOf(onLoad);\n    if (index >= 0) {\n      this.onLoaded.splice(index, 1);\n    }\n    if (!this.onLoaded.length) {\n      this.cleanup();\n    }\n  }\n\n  private async doLoad() {\n    if (this.state !== 'new') return;\n    this.state = 'loading';\n    const image = await createImage(this.getUrl());\n    if (image) {\n      this.type = ContentType.Image;\n      this.size = new Size(image.naturalWidth, image.naturalHeight);\n    } else {\n      const video = await createVideo(this.getUrl());\n      if (video) {\n        this.duration = video.duration;\n        this.type = ContentType.Video;\n        this.size = new Size(video.videoWidth, video.videoHeight);\n      }\n    }\n    this.handleLoaded();\n  }\n\n  private handleLoaded = () => {\n    this.state = 'loaded';\n    this.onLoaded.forEach(this.callOnLoad);\n  };\n  \n  private callOnLoad = (onLoad: OnContentDataLoaded) => {\n    if (this.type) {\n      onLoad(undefined, this.getUrl());\n    } else {\n      onLoad('Was not a supported image or video', undefined);\n    }\n  }\n\n}\n\nexport default ContentData;\n","import buildArray from '../util/buildArray';\nimport LruCache from '../util/LruCache';\nimport modulo from '../util/modulo';\nimport shuffleList from '../util/shuffleList';\nimport ContentData from './ContentData';\nimport ContentSource from './ContentSource';\n\ninterface StartAt {\n  startAtSid?: string;\n  startAtIndex?: number;\n}\ninterface Options extends StartAt {\n  cacheSize?: number;\n}\n\nclass SlideManager {\n  readonly sources: ContentSource[] = [];\n  private playlist: number[] = [];\n  private cache: LruCache<string, ContentData>;\n\n  private indexOffset: number = 0;\n\n  constructor(sources: ContentSource[], { startAtSid, cacheSize = 10, startAtIndex = 0 }: Options = {}) {\n    this.sources = sources;\n    this.playlist = buildArray(sources.length, i => i);\n    this.indexOffset = Math.max(0, sources.findIndex(s => s.id === startAtSid)) - startAtIndex;\n    this.cache = new LruCache({ max: cacheSize, onEviction: (id, cd) => cd.cleanup() });\n  }\n\n  private externalToPlaylistIndex(externalIndex: number) {\n    return modulo(externalIndex + this.indexOffset, this.playlist.length)\n  }\n\n  getDataForIndex(index: number) {\n    const intplIndex = this.externalToPlaylistIndex(index);\n    const source = this.sources[this.playlist[intplIndex]];\n    let data = this.cache.get(source.id);\n    if (data) {\n      return data;\n    }\n    data = new ContentData(source);\n    this.cache.set(source.id, data);\n    return data;\n  }\n\n  cleanup() {\n    this.cache.clear();\n  }\n\n  private ratePow(rating: number) {\n    if (rating === 0) {\n      return 0;\n    }\n    return Math.pow(2, rating - 1);\n  }\n\n  shuffle({ startAtIndex = 0, startAtSid }: StartAt) {\n    const currentFileIndex = this.sources.findIndex(s => s.id === startAtSid);\n    const ratings = this.sources.map(f => 3 /*f.GetMetaData().rating*/);\n    const maxRating = ratings.reduce((p, c) => Math.max(p, c))  ;\n    const numSeqs = this.ratePow(maxRating);\n    const instances = buildArray(this.sources.length, () => Array(numSeqs).fill(false));\n    for (let i = 0; i < this.sources.length; i++) {\n      let count = 0;\n      const numWanted = Math.min(numSeqs, this.ratePow(ratings[i]));\n      while (count < numWanted) {\n        const target = Math.floor(Math.random() * (numSeqs - count));\n        let cur = -1;\n        let j = -1;\n        while (cur < target) {\n          j++;\n          if (!instances[i][j]) {\n            cur++;\n          }\n        }\n        instances[i][j] = true;\n        count++;\n      }\n    }\n\n    if (currentFileIndex >= 0) {\n      // Prevent the current slide from showing up in the first section, since\n      // it's already showing and we'll add it to the front of the list soon.\n      instances[currentFileIndex][0] = false;\n    }\n\n    const allSections: number[] = [];\n    let section: number[];\n    for (let i = 0; i < numSeqs; i++) {\n      section = [];\n      for (let j = 0; j < this.sources.length; j++) {\n        if (instances[j][i]) {\n            section.push(j);\n        }\n      }\n      shuffleList(section);\n      allSections.push(...section);\n    }\n    this.playlist = allSections;\n    if (currentFileIndex >= 0) {\n      this.playlist.unshift(currentFileIndex);\n    }\n    this.indexOffset = -startAtIndex;\n  }\n\n  unshuffle({ startAtIndex = 0, startAtSid }: StartAt) {\n    this.indexOffset = Math.max(0, this.sources.findIndex(s => s.id === startAtSid)) - startAtIndex;\n    this.playlist = buildArray(this.sources.length, i => i);\n  }\n\n  removeSource(source: ContentSource) {\n    const sourceIndex = this.sources.findIndex((s) => s.id === source.id);\n    if (sourceIndex < 0) return;\n    this.sources.splice(sourceIndex, 1);\n    const newPlaylist: number[] = [];\n    this.playlist.forEach((plIndex) => {\n      if (plIndex < sourceIndex) {\n        newPlaylist.push(plIndex);\n      } else if (plIndex > sourceIndex) {\n        newPlaylist.push(plIndex - 1);\n      }\n    });\n    this.playlist = newPlaylist;\n  }\n}\n\nexport default SlideManager;\n","\nconst isMobile = (): boolean => /Mobi|Android/i.test(navigator.userAgent);\n\nexport default isMobile;\n","import React from 'react';\nimport IconButton, { IconButtonProps } from '@material-ui/core/IconButton';\nimport Menu, { MenuProps } from '@material-ui/core/Menu';\n\ninterface Props {\n  buttonContent: React.ReactNode;\n  buttonProps?: Partial<IconButtonProps>;\n  children: React.ReactNode;\n  collapse?: boolean;\n  menuProps?: Partial<MenuProps>;\n}\nconst MenuCollapser: React.FC<Props> = ({\n  buttonContent,\n  buttonProps = {},\n  collapse = false,\n  children,\n  menuProps = {},\n}) => {\n  const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n  if (!collapse) {\n    return <React.Fragment>{children}</React.Fragment>;\n  }\n  return (\n    <div>\n      <IconButton\n        onClick={e => setAnchor(anchor ? null : e.currentTarget)}\n        {...buttonProps}\n      >\n        {buttonContent}\n      </IconButton>\n      <Menu\n        anchorEl={anchor}\n        keepMounted\n        open={!!anchor}\n        onClose={() => setAnchor(null)}\n        {...menuProps}\n      >\n        {React.Children.map(children, child => <li>{child}</li>)}\n      </Menu>\n    </div>\n  );\n};\n\nexport default MenuCollapser;\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\nimport Badge from '@material-ui/core/Badge';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport Slider from '@material-ui/core/Slider';\nimport TextField from '@material-ui/core/TextField';\n\nimport AddIcon from '@material-ui/icons/Add';\nimport ArrowRightAltIcon from '@material-ui/icons/ArrowRightAlt';\nimport BlurOnIcon from '@material-ui/icons/BlurOn';\nimport ControlCameraIcon from '@material-ui/icons/ControlCamera';\nimport CropOriginalIcon from '@material-ui/icons/CropOriginal';\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport HeightIcon from '@material-ui/icons/Height';\nimport ImageIcon from '@material-ui/icons/Image';\nimport LinkIcon from '@material-ui/icons/Link';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport SwapHorizIcon from '@material-ui/icons/SwapHoriz';\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\n\nimport SlideshowState from '../api/SlideshowState';\nimport isMobile from '../util/isMobile';\nimport MenuCollapser from './MenuCollapser';\nimport TransitionStyle from '../api/TransitionStyle';\nimport DisplayStyle from '../api/DisplayStyle';\n\nconst SIZE_THRESHOLDS = [800, 600];\n\nconst styles = ({ palette, spacing }: Theme) => createStyles({\n  root: {\n    backgroundColor: palette.controlPanel.main,\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n    '&>*': {\n      flex: '1 1 0',\n    },\n  },\n  sideContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: 'auto',\n  },\n  subContainer: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  centreNavControls: {\n    display: 'flex',\n    justifyContent: 'center',\n    flexBasis: 'auto',\n    flex: '0 0',\n    alignItems: 'center',\n  },\n  speedContainer: {\n    display: 'flex', // For some reason needed to properly size itself!?!?\n  },\n  speedSlider: {\n    width: 100,\n  },\n  menuPaper: {\n    backgroundColor: 'rgba(0, 0, 0, 0.75)',\n  },\n});\n\nconst displayStyleIcons = {\n  [DisplayStyle.Standard]: CropOriginalIcon,\n  [DisplayStyle.Stretch]: HeightIcon,\n  [DisplayStyle.ZoomPan]: ControlCameraIcon,\n};\n\nconst displayStyleSequence = {\n  [DisplayStyle.Standard]: DisplayStyle.Stretch,\n  [DisplayStyle.Stretch]: DisplayStyle.ZoomPan,\n  [DisplayStyle.ZoomPan]: DisplayStyle.Standard,\n};\n\nconst transitionStyleIcons = {\n  [TransitionStyle.Fade]: BlurOnIcon,\n  [TransitionStyle.Slide]: SwapHorizIcon,\n  [TransitionStyle.Instant]: FlashOnIcon,\n};\n\nconst transitionStyleSequence = {\n  [TransitionStyle.Fade]: TransitionStyle.Slide,\n  [TransitionStyle.Slide]: TransitionStyle.Instant,\n  [TransitionStyle.Instant]: TransitionStyle.Fade,\n};\n\ninterface Props extends WithStyles<typeof styles> {\n  className?: string;\n  screenWidth?: number;\n  state: SlideshowState;\n  onNext?: () => void;\n  onPlay?: () => void;\n  onPause?: () => void;\n  onBack?: () => void;\n  onEnterFullscreen?: () => void;\n  onExitFullscreen?: () => void;\n  onDisplayStyleChange?: (style: DisplayStyle) => void;\n  onShuffleChange?: (shuffle: boolean) => void;\n  onSpeedChange?: (speed: number) => void;\n  onTransitionStyleChange?: (style: TransitionStyle) => void;\n  onVolumeChange?: (volume: number) => void;\n  onFilesAdded?: (files: File[]) => void;\n  onUrlsAdded?: (files: string[]) => void;\n}\nconst ControlBar: React.FC<Props> = ({\n  classes, className, screenWidth = 0, state,\n  onNext = () => {},\n  onPlay = () => {},\n  onPause = () => {},\n  onBack = () => {},\n  onEnterFullscreen = () => {},\n  onExitFullscreen = () => {},\n  onShuffleChange = () => {},\n  onDisplayStyleChange = () => {},\n  onSpeedChange = () => {},\n  onTransitionStyleChange = () => {},\n  onVolumeChange = () => {},\n  onFilesAdded = () => {},\n  onUrlsAdded = () => {},\n}) => {\n  const [linkInputOpen, setLinkInputOpen] = React.useState(false);\n  const [linkUrls, setLinkUrls] = React.useState<string[]>([]);\n  const tmpInput = document.createElement('input');\n  const dirPropName = ['webkitdirectory', 'mozdirectory', 'odirectory', 'msdirectory', 'directory'].find(p => p in tmpInput);\n  const size = screenWidth && SIZE_THRESHOLDS.reduce((p, c, i) => screenWidth <= c ? i : p, -1);\n  const DisplayStyleIcon = displayStyleIcons[state.displayStyle];\n  const TransitionStyleIcon = transitionStyleIcons[state.transitionStyle];\n  return (\n    <div className={classnames(classes.root, className)}>\n      <div className={classes.sideContainer}>\n        <div className={classes.subContainer}>\n          <IconButton><MenuIcon /></IconButton>\n          <MenuCollapser\n            buttonContent={<Badge badgeContent={'^'}><AddIcon /></Badge>}\n            collapse={size >= 0}\n            menuProps={{\n              anchorOrigin: {\n                vertical: 'top',\n                horizontal: 'center',\n              },\n              classes: { paper: classes.menuPaper },\n              transformOrigin: {\n                vertical: 'bottom',\n                horizontal: 'center',\n              },\n            }}\n          >\n          {!isMobile() && (\n            // Disable folder selection of mobiles for now, since it's VERY\n            // iffy (i.e. I can't get it working at all...)\n            <IconButton component=\"label\">\n              <input\n                type=\"file\"\n                hidden\n                multiple\n                  onChange={ev => onFilesAdded(Array.from(ev.target.files as ArrayLike<File>))}\n                // NOTE: Firefox Android requires the dom.webkitBlink.dirPicker.enabled\n                // option to be set to true in about:config to allow picking of directories\n                {...{ [dirPropName || 'multiple']: '' }}\n              />\n              <Badge badgeContent={'+'}><FolderOpenIcon /></Badge>\n            </IconButton>\n          )}\n          <IconButton component=\"label\">\n            <input\n              type=\"file\"\n              hidden\n              multiple\n                onChange={ev => onFilesAdded(Array.from(ev.target.files as ArrayLike<File>))}\n            />\n            <Badge badgeContent={'+'}><ImageIcon /></Badge>\n          </IconButton>\n          <IconButton component=\"label\" onClick={() => setLinkInputOpen(true)}>\n            <Badge badgeContent={'+'}><LinkIcon /></Badge>\n          </IconButton>\n          </MenuCollapser>\n          <Dialog onClose={() => setLinkInputOpen(false)} open={linkInputOpen}>\n            <DialogTitle>Enter URLs to add</DialogTitle>\n            <DialogContent>\n              <DialogContentText>\n                URLs can be for media, or for compilations of media, such as a pastebin with a URL on each line.\n              </DialogContentText>\n              <TextField\n                autoFocus\n                fullWidth\n                id=\"urls\"\n                label=\"URLs\"\n                margin=\"dense\"\n                onChange={e => setLinkUrls(e.target.value.split('\\n'))}\n                placeholder=\"https://example.com\"\n                multiline\n                type=\"url\"\n                value={linkUrls.join('\\n')}\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => setLinkInputOpen(false)} color=\"primary\">\n                Cancel\n              </Button>\n              <Button\n                onClick={() => {\n                  onUrlsAdded(linkUrls);\n                  setLinkInputOpen(false);\n                }}\n                color=\"primary\"\n              >\n                Add\n              </Button>\n            </DialogActions>\n          </Dialog>\n        </div>\n        <div className={classes.subContainer}>\n          <MenuCollapser\n            buttonContent={<Badge badgeContent={'^'}><MoreVertIcon /></Badge>}\n            collapse={size >= 1}\n            menuProps={{\n              anchorOrigin: {\n                vertical: 'top',\n                horizontal: 'center',\n              },\n              classes: { paper: classes.menuPaper },\n              transformOrigin: {\n                vertical: 'bottom',\n                horizontal: 'center',\n              },\n            }}\n          >\n          <IconButton\n            onClick={() => onShuffleChange(!state.isShuffled)}\n            title={state.isShuffled ? 'Shuffled' : 'Unshuffled'}\n          >\n            {state.isShuffled ? <ShuffleIcon /> : <ArrowRightAltIcon />}\n          </IconButton>\n          <IconButton\n            onClick={() => onDisplayStyleChange(displayStyleSequence[state.displayStyle])}\n            title={DisplayStyle[state.displayStyle]}\n          >\n            <DisplayStyleIcon />\n          </IconButton>\n            <IconButton\n              onClick={() => onTransitionStyleChange(transitionStyleSequence[state.transitionStyle])}\n              title={TransitionStyle[state.transitionStyle]}\n            >\n              <TransitionStyleIcon />\n            </IconButton>\n          </MenuCollapser>\n        </div>\n        <div />\n      </div>\n      <div className={classes.centreNavControls}>\n        {!isMobile() && <IconButton onClick={onBack}><NavigateBeforeIcon /></IconButton>}\n        <IconButton onClick={() => (state.isPlaying ? onPause(): onPlay())}>\n          {state.isPlaying ? <PauseIcon /> : <PlayArrowIcon />}\n        </IconButton>\n        {!isMobile() && <IconButton onClick={onNext}><NavigateNextIcon /></IconButton>}\n      </div>\n      <div className={classes.sideContainer}>\n        <div />\n        <div className={classes.subContainer}>\n          <Slider\n            className={classes.speedSlider}\n            value={state.speed}\n            max={5}\n            min={1}\n            onChange={(e, v) => { if (state.speed !== v) onSpeedChange(Number(v)); }}\n            step={1}\n          />\n        </div>\n        <div className={classes.subContainer}>\n          <IconButton\n            color={state.volume === 0 ? 'primary' : undefined}\n            onClick={() => onVolumeChange(state.volume === 0 ? 100 : 0 )}\n          >\n            <VolumeMuteIcon />\n          </IconButton>\n          <IconButton onClick={() => (state.isFullscreen ? onExitFullscreen(): onEnterFullscreen())}>\n            {state.isFullscreen ? <FullscreenExitIcon /> : <FullscreenIcon />}\n          </IconButton>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(ControlBar);\n","import { useLayoutEffect, useState } from 'react';\nimport Size from '../../util/Size';\n\nconst useWindowSize = (): Size => {\n  const [size, setSize] = useState(new Size(0, 0));\n  useLayoutEffect(() => {\n    function updateSize() {\n      setSize(new Size(window.innerWidth, window.innerHeight));\n    }\n    window.addEventListener('resize', updateSize);\n    updateSize();\n    return () => window.removeEventListener('resize', updateSize);\n  }, []);\n  return size;\n}\n\nexport default useWindowSize;\n","import { FunctionComponent } from 'react';\nimport Size from '../../util/Size';\nimport useWindowSize from './useWindowSize';\n\ntype WindowSizeChildren = (size: Size) => any;\n\ninterface WindowSizeProps {\n  children: WindowSizeChildren;\n}\n\nconst WindowSizeWrapper: FunctionComponent<WindowSizeProps> = ({ children }) => children(useWindowSize());\n\nexport default WindowSizeWrapper;\n","import React from 'react';\nimport SlideState from '../api/SlideState';\n\ninterface Props {\n  slideState: SlideState;\n  slideContentRenderer: (state: SlideState) => React.ReactNode;\n}\nconst SliderSlide: React.FC<Props> = ({ slideState, slideContentRenderer }) => {\n  const [slide, setSlide] = React.useState<React.ReactNode | undefined>(undefined);\n  React.useEffect(() => setSlide(slideContentRenderer(slideState)), [slideState, slideContentRenderer]); // TODO: Is this doing anything with slideState as dependency?\n  return <React.Fragment>{slide}</React.Fragment>;\n};\n\nexport default SliderSlide;\n","import React from 'react';\nimport Hammer from 'react-hammerjs';\nimport classnames from 'classnames';\n\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\nimport SliderSlide from './SliderSlide';\nimport buildArray from '../util/buildArray';\nimport SlideState from '../api/SlideState';\nimport TransitionStyle from '../api/TransitionStyle';\n\nconst styles = ({ palette, spacing }: Theme) => createStyles({\n  root: {\n    overflow: 'hidden',\n    height: '100%',\n    width: '100%',\n  },\n  slider: {\n    width: '100%',\n    height: '100%',\n    position: 'relative',\n  },\n  slide: {\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n  },\n  slideFadeTransition: {\n    // TODO: Calculate transition duration based on flock velocity when flick occurs?\n    transition: 'opacity 400ms ease', // cubic-bezier(0.5, 0, 0.5, 1)',\n  },\n  slideSlideTransition: {\n    // TODO: Calculate transition duration based on flock velocity when flick occurs?\n    transition: 'transform 200ms ease-out', // cubic-bezier(0.5, 0, 0.5, 1)`,\n  },\n  slideInstantTransition: {},\n});\n\ninterface Props extends WithStyles<typeof styles> {\n  className?: string;\n  slideIndex: number;\n  slideContentRenderer: (state: SlideState) => React.ReactNode,\n  preloadCount?: number;\n  onNext?: () => void;\n  onBack?: () => void;\n  /** Minimum % pan to trigger slide change */\n  panSensitivity?: number;\n  /** Minimum flick velocity to trigger slide change */\n  flickSensitivity?: number;\n  transitionStyle?: TransitionStyle;\n}\nconst Slider: React.FC<Props> = ({\n  classes, className,\n  slideIndex,\n  slideContentRenderer,\n  preloadCount = 1,\n  onNext = () => {},\n  onBack = () => {},\n  panSensitivity = 25,\n  flickSensitivity = 1.0,\n  transitionStyle = TransitionStyle.Slide,\n}) => {\n  const [swipePanX, setSwipePanX] = React.useState<number>(0);\n  const rootRef = React.useRef<HTMLDivElement>(null);\n\n  const handlePan: HammerListener = (e) => {\n    if (rootRef.current) {\n      const panPerc = 100 * e.deltaX / rootRef.current.clientWidth;\n      setSwipePanX(panPerc);\n      if (e.isFinal) {\n        setSwipePanX(0);\n        if (e.velocityX > flickSensitivity) {\n          onBack();\n        } else if (e.velocityX < -flickSensitivity) {\n          onNext();\n        } else if (panPerc <= -panSensitivity) {\n          onNext();\n        } else if (panPerc >= panSensitivity) {\n          onBack();\n        }\n      }\n    }\n  };\n\n  const renderSlide = (slideNum: number) => {\n    const offset = slideNum - preloadCount;\n    const translate = swipePanX + offset * 100;\n    let opacity = 1;\n    if (transitionStyle === TransitionStyle.Fade) {\n      if (offset === 0) {\n        opacity = 1 - (Math.abs(swipePanX) / 100);\n      } else if (offset * Math.sign(swipePanX) === -1) {\n        // This is the next or previous slide and is fading in\n        opacity = Math.abs(swipePanX) / 100;\n      } else {\n        opacity = 0;\n      }\n    } else if (transitionStyle === TransitionStyle.Instant) {\n      opacity = offset === 0 ? 1 : 0;\n    }\n\n    return (\n      <div\n        className={classnames(classes.slide, {\n          [classes.slideFadeTransition]: !swipePanX && transitionStyle === TransitionStyle.Fade,\n          [classes.slideInstantTransition]: !swipePanX && transitionStyle === TransitionStyle.Instant,\n          [classes.slideSlideTransition]: !swipePanX && transitionStyle === TransitionStyle.Slide,\n        })}\n        key={slideIndex + offset}\n        style={{\n          transform: `translateX(${translate}%)`,\n          opacity,\n          zIndex: opacity === 0 ? 0 : 1,\n        }}\n      >\n        <SliderSlide\n          slideState={{\n            index: slideIndex + offset,\n            isActive: offset === 0 && swipePanX === 0,\n          }}\n          slideContentRenderer={slideContentRenderer}\n        />\n      </div>\n    );\n  };\n\n  return (\n    <div className={classnames(classes.root, className)} ref={rootRef}>\n      <Hammer onPan={handlePan}>\n        <div className={classes.slider}>\n          {buildArray(preloadCount * 2 + 1, renderSlide)}\n        </div>\n      </Hammer>\n    </div>\n  );\n}\n\nexport default withStyles(styles)(Slider);\n","import { CSSProperties } from 'react';\nimport Size from '../util/Size';\n\nclass PlanPoint {\n  readonly x: number;\n  readonly y: number;\n  readonly z: number;\n  readonly d: number;\n\n  constructor(x: number, y: number, z: number, d: number) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.d = d;\n  }\n}\n\nclass ContentZoomPan {\n  contentSize: Size;\n  screenSize: Size;\n  duration: number;\n  timer: number = 0;\n  plan: PlanPoint[] = [];\n  transitionMs: number;\n  scaleMult: number = 1;\n  current: number = 0;\n  onTransform: (style: CSSProperties) => void = () => {};\n\n  constructor(contentSize: Size, screenSize: Size, duration: number, onTransform: (style: CSSProperties) => void) {\n    this.contentSize = contentSize;\n    this.screenSize = screenSize;\n    this.duration = duration;\n    this.onTransform = onTransform;\n    this.transitionMs = duration;\n\n\n    const cRat = contentSize.ratio();\n    const sRat = screenSize.ratio();\n    if (Math.abs(cRat - sRat) > 0.5) {\n      if (cRat > sRat) {\n        this.scaleMult = screenSize.height / (screenSize.width / cRat);\n        this.plan = [\n          new PlanPoint(0, 0.5, 0.8, 0.05),\n          new PlanPoint(1, 0.5, 0.8, 0.05),\n        ];\n      } else {\n        this.scaleMult = screenSize.width / (screenSize.height * cRat);\n        this.plan = [\n          new PlanPoint(0.5, 0, 0.8, 0.05),\n          new PlanPoint(0.5, 1, 0.8, 0.05),\n        ];\n      }\n    } else {\n      this.scaleMult = 2;\n      const xOffset = cRat < 1 ? 0 : Math.random() * 0.2 - 0.1;\n      const yOffset = cRat > 1 ? 0 : Math.random() * 0.2 - 0.1;\n      this.plan = [\n        new PlanPoint(0.5 - xOffset, 0.5 - yOffset, 0.0, 0.05),\n        new PlanPoint(0.5 + xOffset, 0.5 + yOffset, 0.4, 0.05),\n      ];\n    }\n    if (this.plan.length > 1) {\n      if (Math.random() < 0.5) {\n        this.plan.reverse();\n      }\n      const totalPause = this.plan.reduce((p, c) => p + (c.d * duration), 0);\n      this.transitionMs = (this.duration - totalPause) / (this.plan.length - 1);\n    }\n  }\n\n  start() {\n    this.current = 0;\n    if (this.plan.length === 0) return;\n    const currPoint = this.plan[this.current];\n    this.onTransform({\n      transform: this.pointToTransform(currPoint),\n      transition: 'none',\n    });\n    this.timer = window.setTimeout(this.nextPoint, currPoint.d * this.duration);\n  }\n\n  stop() {\n    this.onTransform({\n      transform: 'none',\n      transition: 'none',\n    });\n    window.clearTimeout(this.timer);\n  }\n\n  private nextPoint = () => {\n    window.clearTimeout(this.timer);\n    this.current += 1;\n    const currPoint = this.plan[this.current];\n    const fullDuration = this.transitionMs + (currPoint.d * this.duration);\n    this.onTransform({\n      transform: this.pointToTransform(currPoint),\n      transition: `transform ${this.transitionMs}ms ease`,\n    });\n\n    this.timer = window.setTimeout(() => {\n      if (this.current < this.plan.length - 1) {\n        this.nextPoint();\n      } else {\n        this.plan.reverse();\n        this.start();\n      }\n    }, fullDuration);\n  }\n\n  private pointToTransform(pp: PlanPoint): string {\n    const z = 1 + (pp.z * (this.scaleMult - 1));\n    const x = (pp.x - 0.5) * (1 - z) * 100;\n    const y = (pp.y - 0.5) * (1 - z) * 100;\n    return `translate(${x}%, ${y}%) scale(${z})`;\n  }\n};\n\nexport default ContentZoomPan;\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\n\nimport ContentData from '../api/ContentData';\nimport ContentType from '../api/ContentType';\nimport ContentZoomPan from '../api/ContentZoomPan';\nimport Size from '../util/Size';\nimport DisplayStyle from '../api/DisplayStyle';\nimport ContentSource from '../api/ContentSource';\n\nconst styles = ({ palette, spacing }: Theme) => createStyles({\n  root: {\n    width: '100%',\n    height: '100%',\n  },\n  content: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'scale-down',\n    pointerEvents: 'none',\n  },\n  contentStretch: {\n    objectFit: 'contain',\n  },\n  contentZoomPan: {\n    objectFit: 'contain',\n  },\n});\n\ninterface Props extends WithStyles<typeof styles> {\n  className?: string;\n  data: ContentData;\n  duration?: number;\n  isActive: boolean;\n  displayStyle?: DisplayStyle;\n  volume?: number;\n  onSourceInvalid?: (source: ContentSource) => void;\n}\nconst ContentRenderer: React.FC<Props> = ({\n  classes,\n  className,\n  data,\n  duration = 0,\n  isActive,\n  displayStyle = DisplayStyle.Standard,\n  volume = 0,\n  onSourceInvalid = () => undefined,\n}) => {\n  const [dataUrl, setDataUrl] = React.useState('');\n  const [error, setError] = React.useState('');\n  const [transform, setTransform] = React.useState({});\n\n  const rootRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    const onLoad = (err: string | undefined, url: string | undefined) => {\n      setDataUrl(url ?? '');\n      setError(err ?? '');\n      if (err) {\n        console.warn(`Unable to load \"${data.contentSource.name}\" as image or video: ${err}`);\n        onSourceInvalid(data.contentSource);\n      }\n    };\n    data.load(onLoad);\n    return () => {\n      data.cancelLoad(onLoad);\n    };\n  }, [data, onSourceInvalid]);\n\n  const contentSize = data.getSize();\n  const contentType = data.getType();\n  const displaySize = new Size(rootRef.current?.clientWidth || 1, rootRef.current?.clientHeight || 1);\n  React.useEffect(() => {\n    if (isActive && displayStyle === DisplayStyle.ZoomPan && contentType === ContentType.Image) {\n      const zoomer = new ContentZoomPan(\n        new Size(contentSize.width, contentSize.height),\n        new Size(displaySize.width, displaySize.height),\n        duration,\n        setTransform,\n      );\n      zoomer.start();\n      return () => zoomer.stop();\n    }\n  }, [isActive, displayStyle, duration, displaySize.width, displaySize.height, contentSize.width, contentSize.height, contentType]);\n\n  const imgVidClassName = classnames(classes.content, {\n    [classes.contentStretch]: displayStyle === DisplayStyle.Stretch,\n    [classes.contentZoomPan]: displayStyle === DisplayStyle.ZoomPan,\n  });\n  let content = null;\n  if (error) return content = <span>Error loading {data.contentSource.name}: {error}</span>;\n  else if (!dataUrl) return <span>Loading...</span>;\n  else if (contentType === ContentType.Image) {\n    content = <img className={imgVidClassName} src={dataUrl} alt=\"\" style={transform} />;\n  } else if (contentType === ContentType.Video) {\n    const playPauseOnMount = (vid: HTMLVideoElement | null) => {\n      if (vid && vid.paused && isActive) {\n        vid.play();\n      } else if (vid && !vid.paused && !isActive) {\n        vid.pause();\n      }\n    };\n    content = <video\n      autoPlay={isActive}\n      className={imgVidClassName}\n      loop\n      muted={volume === 0}\n      preload=\"auto\"\n      ref={playPauseOnMount}\n      src={dataUrl}\n      style={transform}\n    />;\n  }\n  return <div className={classes.root} ref={rootRef}>{content}</div>;\n};\n\nexport default withStyles(styles)(ContentRenderer);\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    body: {\n      overflow: 'hidden',\n    },\n  },\n}));\n\nconst AppStyle = () => {\n  useStyles();\n  return <CssBaseline />;\n};\n\nexport default AppStyle;\n","import React from 'react';\n\nimport { PaletteType } from '@material-ui/core';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport { teal } from '@material-ui/core/colors';\n\nimport AppStyle from './AppStyle';\nimport SlideshowMain from './SlideShowMain';\n\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface ThemeOptions {\n  }\n  interface Theme {\n  }\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface PaletteOptions {\n    controlPanel?: PaletteColorOptions;\n    controlPanelOverlay?: PaletteColorOptions;\n  }\n  interface Palette {\n    controlPanel: PaletteColor;\n    controlPanelOverlay: PaletteColor;\n  }\n}\n\nconst createTheme = (themeType: PaletteType) => createMuiTheme({\n  palette: {\n    primary: { main: teal[500] },\n    background: { default: 'black' },\n    controlPanel: { main: 'rgba(25,25,25,1)' },\n    controlPanelOverlay: { main: 'rgba(25,25,25,0.7)' },\n    type: themeType,\n  },\n});\n\nfunction App({ themeType = 'dark' }: { themeType: PaletteType }) {\n  const theme = createTheme(themeType);\n  return (\n    <MuiThemeProvider theme={theme}>\n      <AppStyle />\n      <SlideshowMain />\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './ui/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// Moved to here: https://create-react-app.dev/docs/making-a-progressive-web-app/\nserviceWorker.unregister();\n","import isElectron from '../util/isElectron';\nimport DisplayStyle from './DisplayStyle';\nimport TransitionStyle from './TransitionStyle';\n\nconst settingsKey = 'settings';\n\nenum SettingType {\n  bool,\n  enum,\n  number,\n  string,\n}\n\nenum SettingSection {\n  general = 'General',\n  controlBar = 'Control Bar',\n}\ntype Sectkey = keyof (typeof SettingSection);\nconst reverseSections: Map<SettingSection, Sectkey> = new Map(Object.entries(SettingSection).map(([k,v]) => [v, k as Sectkey]));\n\ninterface Setting {\n  section: SettingSection;\n  menu?: {\n    displayName: string;\n    type: SettingType;\n    options?: string[];\n  }\n  default: any;\n}\n\n// We need this to check the definition types are valid while still retaining\n// \"autocompleteability\" of the keys.\nfunction checkValid<T extends { [key: string]: Setting }>(arg: T): T {\n  return arg;\n}\n\nexport const Settings = checkValid({\n  displayStyle: {\n    section: SettingSection.controlBar,\n    default: DisplayStyle.Standard,\n  },\n  isShuffled: {\n    section: SettingSection.controlBar,\n    default: false,\n  },\n  speed: {\n    section: SettingSection.controlBar,\n    default: 3,\n  },\n  volume: {\n    section: SettingSection.controlBar,\n    default: 0, // Mute by default, but allow user to adjust volume later in control.\n  },\n  transitionStyle: {\n    section: SettingSection.controlBar,\n    default: TransitionStyle.Instant,\n  },\n});\ntype PrefKey = keyof (typeof Settings);\nconst reversePrefs: Map<Setting, PrefKey> = new Map(Object.entries(Settings).map(([k,v]) => [v, k as PrefKey]));\n\nfunction getKeys(pref: Setting | PrefKey): { prefKey: PrefKey, fullKey: string } {\n  const prefKey = typeof pref === 'string' ? pref : reversePrefs.get(pref);\n  if (!prefKey) throw Error(`Couldn't find key for setting ${JSON.stringify(pref)}`);\n  const sectKey = reverseSections.get(Settings[prefKey].section);\n  if (!sectKey) throw Error(`Couldn't find section for setting ${prefKey}}`);\n  return { prefKey, fullKey: `${sectKey}.${prefKey}` };\n}\n\nexport function getSetting(pref: Setting | PrefKey): any {\n  const { prefKey, fullKey } = getKeys(pref);\n  let settings;\n  if (isElectron() && global.electronIpc) {\n    settings = global.electronIpc.getSettings();\n  } else {\n    settings = JSON.parse(localStorage.getItem(settingsKey) || '{}');\n  }\n  return settings[fullKey] || Settings[prefKey].default;\n}\n\nexport function setSetting(pref: Setting | PrefKey, value: any) {\n  const { fullKey } = getKeys(pref);\n  if (isElectron() && global.electronIpc) {\n    const settings = global.electronIpc.getSettings();\n    global.electronIpc.setSettings({ ...settings, [fullKey]: value });\n  } else {\n    const settings = JSON.parse(localStorage.getItem(settingsKey) || '{}');\n    localStorage.setItem(settingsKey, JSON.stringify({ ...settings, [fullKey]: value }));\n  }\n}\n","\nenum TransitionStyle {\n  Fade,\n  Slide,\n  Instant,\n};\n\nexport default TransitionStyle;\n","\nenum DisplayStyle {\n  Standard,\n  Stretch,\n  ZoomPan,\n};\n\nexport default DisplayStyle;\n","class Size {\n  readonly width: number;\n  readonly height: number;\n\n  constructor(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n  }\n\n  ratio() {\n    return this.width /this.height;\n  }\n}\n\nexport default Size;\n","\nenum ContentType {\n  Image = 'Image',\n  Video = 'Video',\n};\n\nexport default ContentType;\n","\nconst buildArray = <T>(length: number, fill: (index: number) => T) => {\n  return Array.from({ length }).map((_, i) => fill(i));\n};\n\nexport default buildArray;\n","\nconst isElectron = () => /electron/i.test(navigator.userAgent);\n\nexport default isElectron;\n","import ContentSource from './ContentSource';\n\nclass FileContentSource implements ContentSource {\n  file: File;\n  id: string;\n  name: string;\n\n  constructor(id: string, file: File) {\n    this.id = id;\n    this.name = file.name;\n    this.file = file;\n  }\n  \n  getObjectUrl() {\n    return URL.createObjectURL(this.file);\n  }\n}\n\nexport const getFileEntryContentSource = async (fileEntry: FileEntry): Promise<FileContentSource> => {\n    const file = await new Promise<File>((res, rej) => fileEntry.file(res, e => rej(`Error accessing file ${fileEntry.name}: ${e}`)));\n    return getFileContentSource(file);\n};\n\nexport const getFileContentSource = (file: File): FileContentSource => {\n    return new FileContentSource(`${file.name}:${file.size}`, file);\n};\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\n\nimport listFileEntries from '../util/listFileEntries';\nimport promiseAny from '../util/promiseAny';\nimport arrayUnique from '../util/arrayUnique';\n\nimport SlideManager from '../api/SlideManager';\nimport SlideshowState, { saveSlideshowStateToSettings } from '../api/SlideshowState';\nimport ContentData from '../api/ContentData';\nimport { getFileContentSource, getFileEntryContentSource } from '../api/FileContentSource';\nimport ContentSource from '../api/ContentSource';\nimport { getSetting, Settings } from '../api/Settings';\nimport SlideState from '../api/SlideState';\nimport SlideshowTimer from '../api/SlideshowTimer';\nimport { getUrlContentSource } from '../api/UrlContentSource';\n\nimport DragAndDrop from './DragAndDrop';\nimport ControlBar from './ControlBar';\nimport WindowSizeWrapper from './hooks/WindowSizeWrapper';\nimport Slider from './Slider';\nimport ContentRenderer from './ContentRenderer';\nimport isElectron from '../util/isElectron';\nimport TitleBar from './TitleBar';\n\nconst ShowControlsDuration = 4000;\nconst PreloadCount = 1;\nconst CacheSize = PreloadCount * 2 + 3;\n\n\nconst titlebarHeight = 30;\nconst controlsHeight = 60;\n\nconst styles = ({ palette, spacing }: Theme) => createStyles({\n  titlebar: {\n    height: titlebarHeight,\n    width: '100%',\n    backgroundColor: palette.controlPanel.main,\n    zIndex: 1000,\n  },\n  titlebarHideable: {\n    backgroundColor: palette.controlPanelOverlay.main,\n    position: 'absolute',\n    top: -titlebarHeight,\n    transitionProperty: 'top',\n    transitionDuration: '1.0s',\n  },\n  titlebarHideableShow: {\n    bottom: 'unset',\n    top: 0,\n    transitionDuration: '0.1s',\n  },\n  slideshow: {\n    backgroundColor: 'black',\n    display: 'flex',\n    flexFlow: 'column',\n    overflow: 'hidden',\n  },\n  mainArea: {\n    width: '100%',\n    height: '100%',\n    flexGrow: 1,\n  },\n  dragDrop: {\n    width: '100%',\n    height: '100%',\n  },\n  controls: {\n    width: '100%',\n    height: controlsHeight,\n    flexGrow: 0,\n    flexShrink: 0,\n    backgroundColor: palette.controlPanel.main,\n    zIndex: 1000,\n  },\n  controlsHideable: {\n    backgroundColor: palette.controlPanelOverlay.main,\n    position: 'absolute',\n    bottom: -controlsHeight,\n    transitionProperty: 'bottom',\n    transitionDuration: '1.0s',\n  },\n  controlsHideableShow: {\n    top: 'unset',\n    bottom: 0,\n    transitionDuration: '0.1s',\n  },\n  hideMouse: {\n    cursor: 'none',\n  },\n});\n\ninterface Props extends WithStyles<typeof styles> {}\ninterface State {\n  ssController: SlideManager | undefined;\n  ssState: SlideshowState;\n  data: ContentData | undefined;\n  showControls: boolean;\n  slideIndex: number;\n}\n\nclass SlideshowMain extends React.Component<Props, State> {\n  rootRef: React.RefObject<HTMLDivElement>;\n  showControlsTimeout: NodeJS.Timeout | undefined;\n  slideshowTimer: SlideshowTimer;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      ssController: undefined,\n      ssState: {\n        displayStyle: getSetting(Settings.displayStyle),\n        isBorderless: false,\n        isFullscreen: false,\n        isPlaying: false,\n        isShuffled: getSetting(Settings.isShuffled),\n        speed: getSetting(Settings.speed),\n        volume: getSetting(Settings.volume),\n        transitionStyle: getSetting(Settings.transitionStyle),\n      },\n      data: undefined,\n      showControls: false,\n      slideIndex: 0,\n    };\n    this.slideshowTimer = new SlideshowTimer();\n    this.slideshowTimer.onNext = this.handleNext;\n    this.rootRef = React.createRef<HTMLDivElement>();\n  }\n\n  componentDidMount() {\n    document.addEventListener('keyup', this.handleKeyUp);\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keyup', this.handleKeyUp);\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n    this.slideshowTimer.stop();\n  }\n\n  updateSsState(newSsState: Partial<SlideshowState>) {\n    const { ssState } = this.state;\n    this.setState({ ssState: { ...ssState, ...newSsState }});\n    saveSlideshowStateToSettings(newSsState);\n  }\n\n  enterFullscreen = () => {\n    this.rootRef.current?.requestFullscreen();\n    this.showControls();\n  }\n\n  exitFullscreen = () => {\n    if (document.fullscreenElement) {\n      document.exitFullscreen();\n    }\n  }\n\n  handlePause = () => {\n    this.slideshowTimer.stop();\n    this.updateSsState({ isPlaying: false });\n    this.showControls();\n  }\n\n  handlePlay = () => {\n    this.slideshowTimer.start();\n    this.updateSsState({ isPlaying: true });\n    this.showControls();\n  }\n\n  handleShuffleChange = (shuffle: boolean) => {\n    const { ssController, slideIndex } = this.state;\n    const startAtSid = ssController?.getDataForIndex(slideIndex).contentSource.id;\n    const startAtIndex = slideIndex + CacheSize;\n    if (shuffle) {\n      ssController?.shuffle({ startAtSid, startAtIndex });\n    } else {\n      ssController?.unshuffle({ startAtSid, startAtIndex });\n    }\n    this.updateSsState({ isShuffled: shuffle });\n    this.showControls();\n    this.setSlideIndex(startAtIndex);\n  }\n\n  handleSpeedChange = (speed: number) => {\n    this.slideshowTimer.setSpeed(speed);\n    this.updateSsState({ speed });\n    this.showControls();\n  }\n\n  handlePlainSssChange = (state: Partial<SlideshowState>) => {\n    this.updateSsState(state);\n    this.showControls();\n  }\n\n  showControls = () => {\n    const { showControls } = this.state;\n    if (this.showControlsTimeout) clearTimeout(this.showControlsTimeout);\n    if (this.constrolsHideable()) {\n      this.showControlsTimeout = setTimeout(this.handleShowControlsTimeout, ShowControlsDuration);\n      if (!showControls) {\n        this.setState({ showControls: true });\n      }\n    }\n  }\n\n  handleFullscreenChange = () => {\n    this.updateSsState({ isFullscreen: !!document.fullscreenElement });\n  }\n\n  handleDrop = async (items: DataTransferItemList) => {\n    const fileItems = Array.from(items).filter(i => i.kind === 'file');\n    const files = await listFileEntries(...fileItems.map(i => i.webkitGetAsEntry()));\n    const { values, reasons } = await promiseAny(files.map(f => getFileEntryContentSource(f)));\n    reasons.forEach(r => console.error(`Error adding file: ${r}`));\n    this.addNewSources(values);\n  }\n\n  handleFilesAdded = (files: File[]) => {\n    this.addNewSources(files.map(f => getFileContentSource(f)));\n  }\n\n  handleUrlsAdded = async (urls: string[]) => {\n    // const types = await Promise.all(urls.map(fetchUrlMimeType));\n    // const newSources: ContentSource[] = [];\n    // types.forEach((type, i) => {\n    //   if (type.startsWith('image/')) {\n    //     newSources.push(getUrlContentSource(urls[i]));\n    //   } else if (type === 'text/plain') {\n    //     console.log('Loading compilation files not yet supported...');\n    //   } else {\n    //     console.warn(`Unknown content type of URL ${urls[i]}: ${type}`);\n    //   }\n    // });\n    // this.addNewSources(newSources);\n    this.addNewSources(urls.map(getUrlContentSource));\n  }\n\n  handleKeyUp = (e: KeyboardEvent) => {\n    const { ssState } = this.state;\n    let handled = true;\n    if (e.key === 'ArrowLeft') this.handlePrevious();\n    else if (e.key === ' ' && !ssState.isPlaying) this.handlePlay();\n    else if (e.key === ' ' && ssState.isPlaying) this.handlePause();\n    else if (e.key === 'ArrowRight') this.handleNext();\n    else if (e.key === 'Enter' && !ssState.isFullscreen) this.enterFullscreen();\n    else if (e.key === 'Enter' && ssState.isFullscreen) this.exitFullscreen();\n    else if (e.key === '\\\\') this.handlePlainSssChange({ isBorderless: !ssState.isBorderless });\n    else if (e.key === 'F11') this.handlePlainSssChange({ isBorderless: !ssState.isBorderless });\n    else if (e.key === 'f' && !ssState.isFullscreen) this.enterFullscreen();\n    else if (e.key === 'f' && ssState.isFullscreen) this.exitFullscreen();\n    else if (e.key === 'Escape') {\n      this.exitFullscreen();\n      this.handlePlainSssChange({ isBorderless: false });\n    }\n    else if (e.key === 'F12' && isElectron()) global.electronIpc?.send('openDevTools');\n    else {\n      handled = false;\n      // console.log('Unknown key pressed:', e);\n    }\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  handleShowControlsTimeout = () => {\n    this.setState({ showControls: false });\n  }\n\n  handleNext = () => {\n    this.setSlideIndex(this.state.slideIndex + 1);\n  }\n\n  handlePrevious = () => {\n    this.setSlideIndex(this.state.slideIndex - 1);\n  }\n\n  addNewSources(sources: ContentSource[]) {\n    const { ssController, ssState, slideIndex } = this.state;\n    this.slideshowTimer.stop();\n    const startAtSid = ssController?.getDataForIndex(slideIndex).contentSource.id;\n    const startAtIndex = slideIndex + CacheSize;\n    ssController?.cleanup();\n    const newSources = arrayUnique([...(ssController?.sources ?? []), ...sources], s => s.id);\n    const newSsc = new SlideManager(newSources, { cacheSize: CacheSize, startAtSid, startAtIndex });\n    this.slideshowTimer.getData = index => newSsc.getDataForIndex(index);\n    if (ssState.isShuffled) {\n      newSsc.shuffle({ startAtSid, startAtIndex });\n    }\n    if (ssState.isPlaying) {\n      this.slideshowTimer.start();\n    }\n    this.setState({\n      data: undefined,\n      ssController: newSsc,\n    });\n    this.setSlideIndex(startAtIndex);\n  }\n\n  setSlideIndex(index: number) {\n    this.setState({ slideIndex: index });\n    this.slideshowTimer.setIndex(index);\n  }\n\n  renderSlideContent = ({ index, isActive }: SlideState) => {\n    const { ssController, ssState } = this.state;\n    return ssController && <ContentRenderer\n      data={ssController.getDataForIndex(index)}\n      duration={isActive ? this.slideshowTimer.slideDuration() : undefined}\n      isActive={isActive}\n      displayStyle={ssState.displayStyle}\n      volume={ssState.volume}\n      onSourceInvalid={(source) => ssController.removeSource(source)}\n    />\n  }\n\n  constrolsHideable() {\n    const { ssState } = this.state;\n    return ssState.isFullscreen || ssState.isBorderless;\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { ssState, showControls, slideIndex, ssController } = this.state;\n    return (\n      <WindowSizeWrapper>\n        {(size) =>(\n          <div\n            className={classnames(classes.slideshow, {\n              [classes.hideMouse]: this.constrolsHideable() && !showControls,\n            })}\n            onMouseMove={this.showControls}\n            onMouseDown={this.showControls}\n            ref={this.rootRef}\n            style={{ width: size.width, height: size.height }}\n          >\n            {isElectron() && <TitleBar\n              className={classnames(classes.titlebar, {\n                [classes.titlebarHideable]: this.constrolsHideable(),\n                [classes.titlebarHideableShow]: this.constrolsHideable() && showControls,\n              })}\n              slideTitle={ssController?.getDataForIndex(slideIndex).contentSource.name}\n            />}\n            <div\n              className={classes.mainArea}\n              onDoubleClick={() => {\n                if (!document.fullscreenElement) this.enterFullscreen();\n                if (!!document.fullscreenElement) this.exitFullscreen();\n              }}\n            >\n              <DragAndDrop className={classes.dragDrop} onDrop={this.handleDrop}>\n                <Slider\n                  onNext={this.handleNext}\n                  onBack={this.handlePrevious}\n                  slideContentRenderer={this.renderSlideContent}\n                  slideIndex={slideIndex}\n                  preloadCount={PreloadCount}\n                  transitionStyle={ssState.transitionStyle}\n                />\n              </DragAndDrop>\n            </div>\n            <ControlBar\n              className={classnames(classes.controls, {\n                [classes.controlsHideable]: this.constrolsHideable(),\n                [classes.controlsHideableShow]: this.constrolsHideable() && showControls,\n              })}\n              screenWidth={size.width}\n              state={ssState}\n              onNext={this.handleNext}\n              onPlay={this.handlePlay}\n              onPause={this.handlePause}\n              onBack={this.handlePrevious}\n              onEnterFullscreen={this.enterFullscreen}\n              onExitFullscreen={this.exitFullscreen}\n              onDisplayStyleChange={(displayStyle) => this.handlePlainSssChange({ displayStyle })}\n              onShuffleChange={this.handleShuffleChange}\n              onSpeedChange={this.handleSpeedChange}\n              onTransitionStyleChange={(transitionStyle) => this.handlePlainSssChange({ transitionStyle })}\n              onVolumeChange={(volume) => this.handlePlainSssChange({ volume })}\n              onFilesAdded={this.handleFilesAdded}\n              onUrlsAdded={this.handleUrlsAdded}\n            />\n          </div>\n        )}\n      </WindowSizeWrapper>\n    );\n  }\n}\n\nexport default withStyles(styles)(SlideshowMain);\n","\nconst listFileEntries = async (...fileEntries: Entry[]): Promise<FileEntry[]> => {\n  return (await Promise.all(fileEntries.map((fileEntry): Promise<any> | any => {\n    if (fileEntry.isFile) {\n      return fileEntry;\n    } else if (fileEntry.isDirectory) {\n      return new Promise<FileEntry[]>((res, rej) => {\n        (fileEntry as DirectoryEntry).createReader().readEntries(\n          (entries: any[]) => res(listFileEntries(...entries)),\n          (error: any) => rej(error),\n        );\n      });\n    }\n    return [];\n  }))).flat();\n};\n\nexport default listFileEntries;\n","type PromiseAnyResult<T> = {\n  /** The values of the fulfilled promises */\n  values: T[];\n  /** The reasons of the rejected promises */\n  reasons: any[];\n}\n\nasync function promiseAny<T>(promises: Promise<T>[]): Promise<PromiseAnyResult<T>> {\n  const results = await Promise.allSettled(promises);\n  const values: T[] = [];\n  const reasons: any[] = [];\n  results.forEach((r) => {\n    if (r.status === 'fulfilled') {\n      values.push(r.value);\n    } else {\n      reasons.push(r.reason);\n    }\n  });\n  return { values, reasons };\n}\n\nexport default promiseAny;\n","\n/**\n * Uniqify a given array.\n * @param {*[]} arr The array to uniqify.\n * @param {function} [keyFunc] The function to determine the\n *  unique \"key\" for each item.\n * @returns A copy of the array, but without duplicates.\n */\nconst arrayUnique = <T>(arr: T[], keyFunc?: (item: T) => any) =>\n  Array.from(arr.reduce((result, item) => {\n    const key = (keyFunc && keyFunc(item)) || item;\n    result.set(key, item);\n    return result;\n  }, new Map<any, T>()).values());\n\nexport default arrayUnique;\n","import DisplayStyle from './DisplayStyle';\nimport { setSetting, Settings } from './Settings';\nimport TransitionStyle from './TransitionStyle';\n\ntype SlideshowState = {\n  displayStyle: DisplayStyle;\n  isBorderless: boolean;\n  isFullscreen: boolean;\n  isPlaying: boolean;\n  isShuffled: boolean;\n  speed: number;\n  volume: number;\n  transitionStyle: TransitionStyle;\n};\n\nexport const saveSlideshowStateToSettings = (state: Partial<SlideshowState>) => {\n  if (state.displayStyle !== undefined) setSetting(Settings.displayStyle, state.displayStyle);\n  if (state.isShuffled !== undefined) setSetting(Settings.isShuffled, state.isShuffled);\n  if (state.speed !== undefined) setSetting(Settings.speed, state.speed);\n  if (state.transitionStyle !== undefined) setSetting(Settings.transitionStyle, state.transitionStyle);\n  if (state.volume !== undefined) setSetting(Settings.volume, state.volume);\n};\n\nexport default SlideshowState;\n","import ContentData from './ContentData';\n\nconst SpeedDelay = [25000, 15000, 10000, 5000, 2000];\n\nclass SlideshowTimer {\n  onNext: () => void = () => {};\n  getData: (index: number) => (ContentData | undefined) = () => undefined;\n  private speed: number;\n\n  private index: number;\n  private timeout?: number;\n  private startedAt: Date;\n\n  private data?: ContentData;\n\n  constructor(speed = 3) {\n    this.index = 0;\n    this.speed = speed;\n    this.startedAt = new Date();\n  }\n\n  isPlaying() {\n    return !!this.timeout;\n  }\n\n  start() {\n    this.stop();\n    this.startedAt = new Date();\n    this.data = this.getData(this.index);\n    if (!this.data?.isLoaded()) {\n      this.data?.load(this.handleDataLoaded);\n    }\n    this.updateTimer();\n  }\n  \n  stop() {\n    clearTimeout(this.timeout);\n    this.timeout = undefined;\n    this.data?.cancelLoad(this.handleDataLoaded);\n  }\n\n  setIndex(index: number) {\n    if (index !== this.index) {\n      this.index = index;\n      if (this.isPlaying()) {\n        this.start();\n      }\n    }\n  }\n\n  setSpeed(speed: number) {\n    this.speed = speed;\n    if (this.isPlaying()) {\n      this.updateTimer();\n    }\n  }\n\n  slideDuration(): number {\n    const stdDuration = SpeedDelay[this.speed - 1];\n    const vidDuration = (this.data?.getDuration() ?? 0) * 1000;\n    return Math.max(stdDuration, vidDuration);\n  }\n\n  private handleDataLoaded = () => {\n    this.updateTimer();\n  }\n\n  private updateTimer() {\n    clearTimeout(this.timeout);\n    const delay = this.calculateRemainingDuration();\n    this.timeout = window.setTimeout(this.onNext, delay);\n  }\n\n  private calculateRemainingDuration(): number {\n    return this.slideDuration() - (+new Date() - +this.startedAt);\n  }\n\n}\n\nexport default SlideshowTimer;\n","import ContentSource from './ContentSource';\n\nclass UrlContentSource implements ContentSource {\n  url: string;\n  id: string;\n  name: string;\n\n  constructor(url: string) {\n    this.id = url;\n    this.name = url;\n    this.url = url;\n  }\n  \n  getObjectUrl() {\n    return this.url;\n  }\n}\n\nexport const getUrlContentSource = (url: string): UrlContentSource => {\n    return new UrlContentSource(url);\n};\n","import React, { Component } from 'react';\n\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\n\nconst styles = ({ palette, spacing }: Theme) => createStyles({\n  overlay: {\n    border: 'dashed grey 4px',\n    backgroundColor: 'rgba(255,255,255,.8)',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0, \n    right: 0,\n    zIndex: 9999\n  },\n  overlayMessage: {\n    position: 'absolute',\n    top: '50%',\n    right: 0,\n    left: 0,\n    textAlign: 'center',\n    color: 'grey',\n    fontSize: 36\n  },\n});\n\ninterface Props extends WithStyles<typeof styles> {\n  className?: string;\n  onDrop: (items: DataTransferItemList) => void;\n};\ninterface State {\n  dragging: boolean;\n};\nclass DragAndDrop extends Component<Props, State> {\n  dropRef: React.RefObject<HTMLDivElement> = React.createRef();\n  dragCounter = 0;\n  state: State = {\n    dragging: false,\n  };\n  \n  handleDrag = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleDragIn = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.dragCounter++;\n    if (e.dataTransfer?.items?.length) {\n      this.setState({dragging: true})\n    }\n  };\n\n  handleDragOut = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.dragCounter--;\n    if (this.dragCounter <= 0) {\n      this.setState({ dragging: false });\n    }\n  };\n\n  handleDrop = (e: DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ dragging: false });\n    if (e.dataTransfer?.items?.length) {\n      this.props.onDrop(e.dataTransfer.items);\n    }\n    this.dragCounter = 0;\n  };\n  \n  componentDidMount() {\n    this.dragCounter = 0;\n    let div = this.dropRef.current;\n    if (div) {\n      div.addEventListener('dragenter', this.handleDragIn)\n      div.addEventListener('dragleave', this.handleDragOut)\n      div.addEventListener('dragover', this.handleDrag)\n      div.addEventListener('drop', this.handleDrop)\n    }\n  }\n  \n  componentWillUnmount() {\n    let div = this.dropRef.current;\n    if (div) {\n      div.removeEventListener('dragenter', this.handleDragIn)\n      div.removeEventListener('dragleave', this.handleDragOut)\n      div.removeEventListener('dragover', this.handleDrag)\n      div.removeEventListener('drop', this.handleDrop)\n    }\n  }\n\n  render() {\n    const { classes, className } = this.props;\n    return (\n      <div className={className} ref={this.dropRef}>\n        {this.state.dragging && (\n          <div className={classes.overlay}>\n            <div className={classes.overlayMessage}>\n              <div>drop here :)</div>\n            </div>\n          </div>\n        )}\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(DragAndDrop);\n"],"sourceRoot":""}